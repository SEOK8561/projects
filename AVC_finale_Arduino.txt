#include <Servo.h>
#define TRIG 13
#define ECHO 12

const int buzzerPin = 6;
int volume = 10;
int value = 0;
Servo servo;

void setup(){
  pinMode(TRIG, OUTPUT); 
  pinMode(ECHO, INPUT);
  pinMode(buzzerPin, OUTPUT);
  servo.attach(9);
  Serial.begin(9600);
}

void loop(){
  long duration, distance;
  digitalWrite(TRIG, LOW);
  delayMicroseconds(10);
  digitalWrite(TRIG, HIGH);
  delayMicroseconds(15);
  digitalWrite(TRIG, LOW);
  
  duration = pulseIn(ECHO, HIGH);
  distance = duration/29/2;
  
  if(value == 0) {
    value = 170;
    delay(100);
    servo.write(value);
    
    if(distance < 40){
       Serial.println(distance);
       delay(100);
       analogWrite(buzzerPin, volume=10);
       delay(100);
     } else if(distance >= 40) {
       Serial.println(distance);
       analogWrite(buzzerPin, volume=0);
       delay(100);
     } 
     if(distance < 40){
       Serial.println(distance);
       delay(100);
       analogWrite(buzzerPin, volume=10);
       delay(100);
     } else if(distance >= 40) {
         Serial.println(distance);
          analogWrite(buzzerPin, volume=0);
          delay(100);
        }
  } else {
    value = 0;
    delay(100);
    servo.write(value);
    
    if(distance < 40){
       Serial.println(distance);
       delay(100);
       analogWrite(buzzerPin, volume=10);
       delay(100);
     } else if(distance >= 40) {
       Serial.println(distance);
       analogWrite(buzzerPin, volume=0);
       delay(100);
     } 
     if(distance < 40){
       Serial.println(distance);
       delay(100);
       analogWrite(buzzerPin, volume=10);
       delay(100);
     } else if(distance >= 40) {
         Serial.println(distance);
          analogWrite(buzzerPin, volume=0);
          delay(100);
        }
  }
}

